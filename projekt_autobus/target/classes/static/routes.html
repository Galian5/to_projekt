<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script>

        $.makeTable = function (mydata) {
            var table = $('<table border=1>');
            var tblHeader = "<tr>";
            for (var k in mydata[0]) tblHeader += "<th>" + k + "</th>";
            tblHeader += "</tr>";
            $(tblHeader).appendTo(table);
            $.each(mydata, function (index, value) {
                var TableRow = "<tr>";
                $.each(value, function (key, val) {
                    TableRow += "<td>" + val + "</td>";
                });
                TableRow += "</tr>";
                $(table).append(TableRow);
            });
            return ($(table));
        };


       $(document).ready(function(){
            $.get( "http://localhost:8080/routes", function( data, status ) {
                var table = $.makeTable(data);
                $(table).appendTo("#trasy");
            });

        //
        // function addData() {
        //     console.log('dupa');
        //     var form = document.getElementById("addRouteForm");
        //     var dupa = {};
        //     var data = new FormData(form);
        //     $.ajax({
        //         type: "POST",
        //         url: '/routes',
        //         data: JSON.stringify(dupa),
        //         dataType: 'json',
        //         contentType: "application/json"
        //     });
        // }
        //
        // $("#addRouteForm").submit(function (e) {
        //     e.preventDefault();
        //     addData()
        // });
       });
       // $("#dodaj").click(function() {
        //    $( "#addRouteForm" );
       // });



        // $("#addRouteForm").submit(function (e) {
        //     e.preventDefault();
        //
        //     // collect the form data while iterating over the inputs
        //     var data = {};
        //     for (var i = 0, ii = form.length; i < ii; ++i) {
        //         var input = form[i];
        //         if (input.name) {
        //             data[input.name] = input.value;
        //         }
        //     }
        //     addData();
        // });

    </script>
</head>

<body>
<h3>Dostępne trasy: </h3>
<table id="trasy">

</table>
<br>
<h3>Dodaj trasę: </h3>
<form id="addRouteForm" action="/routes" method="post">
    <input type="text" name="startCity" placeholder="Miasto początkowe">
    <input type="text" name="endCity" placeholder="MIasto docelowe">
    <input type="submit" value="Dodaj" >
</form>
</body>

</html>
